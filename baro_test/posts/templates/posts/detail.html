{% extends 'base.html' %} {% load static%} 

{% block css %}
<link rel="stylesheet" href="{% static 'css/post/post_detail.css' %}">
{% endblock %}

{% block content %}
<div class="container">
    <div class="title">
        <h4 class="title-text" style="font-family: 'GmarketSansMedium';">{{ target_post.title }}</h4>
    </div>
    <div class="user-info-container">
        <a href="{% url 'account:detail' username=target_post.user.username %}">
            {% if target_post.user.profile_image %}
                <img
                    class="user-image"
                    src="data:image/jpeg;base64,{{ target_post.user.profile_image }}"
                    alt=""
                />
            {% else %}
                <img
                    class="user-image"
                    src="{% static 'images/no_profile.png'%}"
                    alt=""
                />
            {% endif %} &nbsp;&nbsp;&nbsp;
            <strong>{{ target_post.user.username }}</strong>
        </a>
        <div style="text-align:right;">
            {% if target_post.project.pk %}
            <a href="{% url 'projects:list' %}">
                {{target_post.project.title}}
            </a>
            {% else %}
            <a href="{% url 'projects:list' %}"> Temp </a>
            {% endif %}
        </div>
    </div>
    <div
        class="content-div"
    >
        <p>{{ target_post.content }}</p>
        <strong>{{ target_post.post_time }}</strong>
    </div>
    <div class="button-container">
        {% if target_post.user == user %}
                <div style="text-align: center">
                    <a href="{% url 'post:update' pk=target_post.pk %}">
                        <btn
                            class="btn btn-dark rounded-pill"
                            style="font-family: 'GmarketSansMedium'"
                            >수정</btn
                        >
                    </a>
                </div>
                &nbsp;&nbsp;&nbsp;
                <div style="text-align: center">
                    <a href="{% url 'post:delete' pk=target_post.pk %}">
                        <btn
                            class="btn btn-danger rounded-pill"
                            style="font-family: 'GmarketSansMedium'"
                            >삭제</btn
                        >
                    </a>
                </div>
        {% else %}
            {% if user.is_authenticated %}
                {% if not likes %}
                    <div style="text-align: center">
                        <a href="{% url 'post:like' %}?post_pk={{ target_post.pk }}">
                            <btn
                                class="btn btn-outline-success rounded-pill"
                                style="font-family: 'GmarketSansMedium'"
                                >좋아요</btn
                            >
                        </a>
                    </div>
                {% else %}
                    <div style="text-align: center">
                        <a href="{% url 'post:like' %}?post_pk={{ target_post.pk }}">
                            <btn
                                class="btn btn-outline-danger rounded-pill"
                                style="font-family: 'GmarketSansMedium'"
                                >좋아요 해제</btn
                            >
                        </a>
                    </div>
                {% endif %}
            {% endif %}
        {% endif %} 
    </div>
    {% comment %} comment {% endcomment %}
    <div class="post-comment-div">
        {% include 'comments/create.html' with post=target_post %}
        {% for comment in target_post.post_comment.all %}
            {% include 'comments/detail.html' with comment=comment.comment%}
        {% endfor %}
    </div>
</div>
{% endblock %}
